#coding:utf-8import Tkinterimport tkFileDialogimport reimport matplotlib.pyplot as pltimport numpy as np
def getFilePath():    filepath=tkFileDialog.askopenfilename(title="选取文件")    root.destroy() #root.quit()    return(filepath)
def getFileData():    fpath=getFilePath()    f=open(fpath,'r')    flines=f.readlines()    start_line_p=re.compile('\[vgs,.*?id\(vds=0.05\),.*',re.IGNORECASE)#id\(vds=0\).*?')    end_line_p=re.compile('[\{\[]')    for line_id,eachline in enumerate(flines,0):        start_line_m=start_line_p.match(eachline)        if start_line_m:            start_line_row=line_id            break    flines_slice=flines[start_line_row+1:]        for line_id,eachline in enumerate(flines_slice,start_line_row+1):        end_line_m=end_line_p.match(eachline)        if end_line_m:            end_line_row=line_id            break            sweep_condition_list=flines[start_line_row].split(',')    for eachline in sweep_condition_list:        if eachline.lower()=='id(vds=0.05)':            i=sweep_condition_list.index(eachline)            #print i            break    data_sweep_list=[]    data_curve_list=[]    for eachline in flines[start_line_row+1:end_line_row-1]:        #print eachline        eachline_list=eachline.split(',')        #print float(eachline_list[0]),float(eachline_list[i])        data_sweep_list.append(float(eachline_list[0]))        data_curve_list.append(float(eachline_list[i]))            print max(data_curve_list)#print np.max(data_curve_list)    print min(data_curve_list)    plt.subplot(211)    plt.plot(data_sweep_list,data_curve_list,'-')    #plt.legend()    #plt.show()    #plt.savefig('a.jpg')    data_sweep_list2=[x*0.5 for x in data_sweep_list]    data_curve_list2=[y*2 for y in data_curve_list]    plt.subplot(212)    plt.scatter(data_sweep_list2,data_curve_list2,s=2,c='r')    plt.ylim(min(data_curve_list2)*0.9,max(data_curve_list2)*1.1)    plt.savefig('b.jpg')    plt.show()root=Tkinter.Tk()btn=Tkinter.Button(root,text="读取文件",command=getFileData,bg='yellow',fg='green')btn.pack()label=Tkinter.Label(root,text="hello world!")label.pack()
root.mainloop()


